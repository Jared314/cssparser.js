<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>cssparser.js by cwdoh</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1>cssparser.js</h1>
        <p>cssparser.js is a parser that generate json from css with matched orders &amp; structures.</p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/cwdoh/cssparser.js" class="button fork"><strong>View On GitHub</strong></a>
        <div class="downloads">
          <span>Downloads:</span>
          <ul>
            <li><a href="https://github.com/cwdoh/cssparser.js/zipball/master" class="button">ZIP</a></li>
            <li><a href="https://github.com/cwdoh/cssparser.js/tarball/master" class="button">TAR</a></li>
          </ul>
        </div>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <h1>cssparser.js</h1>

<p>cssparser.js is a parser that generates json matched with source css structure.</p>

<h2>Description</h2>

<ul>
<li>License: MIT license - <a href="http://www.opensource.org/licenses/mit-license.php">http://www.opensource.org/licenses/mit-license.php</a>
</li>
<li>Author : Changwook Doh - <a href="mailto:changwook.doh@gmail.com">changwook.doh@gmail.com</a>
</li>
</ul><h2>Demo</h2>

<ul>
<li><a href="http://cwdoh.github.io/cssparser.js/demo/CSS_stringify.html">http://cwdoh.github.io/cssparser.js/demo/CSS_stringify.html</a></li>
</ul><h2>Dependency</h2>

<p>Just want to use cssparser.js? Nothing needed.</p>

<p>If want generating parser, install 'jison' before it.</p>

<ul>
<li>Jison - <a href="http://jison.org">http://jison.org</a>
</li>
</ul><h2>Usage</h2>

<h3>from Command-line</h3>

<p>First of all, you should install cssparser.</p>

<pre><code>$ npm install cssparser

or

$ npm install cssparser -g
</code></pre>

<p>Then execute and you can generate JSON file from command-line.</p>

<pre><code>$ cssparser cssFile

or 

$ cssparser cssFile -o output_file
</code></pre>

<h3>from CommonJS Module</h3>

<p>You can generate javascript object from your javascript module.</p>

<pre><code>// getting parser module
var cssparser = require("cssparser");

// create new instance of Parser
var parser = new cssparser.Parser();

// parse &amp; getting json
var json = parser.parse( cssText );
</code></pre>

<h2>Generating parser from source</h2>

<h3>Getting jison &amp; source</h3>

<pre><code>$ npm install jison -g
$ git clone https://github.com/cwdoh/cssparser.js.git
</code></pre>

<h3>Generating from source</h3>

<pre><code>$ grunt

or

$ jison ./src/cssparser.y ./src/css.l
</code></pre>

<h2>JSON Structure</h2>

<p>There's three level of JSON structure for CSS.</p>

<ul>
<li>simple - most simple. this's simply consist of just key &amp; value.</li>
<li>deep - more detailed then simple mode. this has more informations of selector, terms, expression, queries, …</li>
<li>atomic - most detailed. 'atomic' JSON has all pieces of each key &amp; values in CSS. e.g. length has numeric value &amp; its unit like "100px" -&gt; { "value": 100, "unit": "px" }</li>
</ul><h3>Mode 'simple'</h3>

<pre><code>stylesheet_object =

    + charset [Object]

    + imports [Array]
        + ImportRule [Object]
            + type : "import" : []// URI or string
            + mediaquries [DOMString] : // if query exist

    + namespaces [Array]
        + namespace [DOMString] : // URI or string 
        + prefix [DOMString] : // if prefix exist

    + rulelist [Array]
        + [Object(Media)]
            + type [DOMString] : "media"
            + mediaqueries [DOMString] : // query string
            + children [Array] : // nested rulelist
                + rulelist // …

        + [Object(FontFace)]
            + type [DOMString] : "fontface"
            + declarations [Object] : // declarations

        + [Object(Page)]
            + type [DOMString] : "page"
            + id [DOMString] : // identifier
            + pseudo [DOMString] : // pseudo string
            + declarations [Object] : // declarations

        + [Object(Style)]
            + type [DOMString] : "style"
            + selector [DOMString] : // selector string
            + declarations [Object] : // declarations

        + [Object(Keyframes)]
            + type [DOMString] : "keyframes"
            + id [DOMString] : // identifier
            + prefix [DOMString] : // vendor prefix e.g. -moz-, -webkit-, -o-, …
            + keyframes [Array]
                + offset [DOMString] : // offset string
                + declarations [Object] : // declarations
</code></pre>

<h3>Mode 'deep'</h3>

<p>Not yet.</p>

<h3>Mode 'atomic'</h3>

<p>Not yet.</p>

<h2>Example</h2>

<p>following is tested result with some rulesets at <a href="http://css3please.com">http://css3please.com</a></p>

<pre><code>node cssparser ./test/sample.css -console
</code></pre>

<h3>Input</h3>

<pre><code>@charset 'utf-8';

@import 'custom.css';
@import url("fineprint.css");
@import url("fineprint.css") print;
@import url("bluish.css") projection, tv;
@import "common.css" screen, projection;
@import url('landscape.css') screen and (orientation:landscape);

@namespace "http://www.w3c.org";
@namespace svg "http://www.w3c.org/svg";

@media screen {
    * {
       position: absolute;
     }

    .box_shadow {
      -webkit-box-shadow: 0px 0px 4px 0px #ffffff; /* Android 2.3+, iOS 4.0.2-4.2, Safari 3-4 */
              box-shadow: 0px 0px 4px 0px #ffffff; /* Chrome 6+, Firefox 4+, IE 9+, iOS 5+, Opera 10.50+ */
    }
}

@-webkit-keyframes myanim {
  0%   { opacity: 0.0; }
  50%  { opacity: 0.5; }
  100% { opacity: 1.0; }
}

.matrix {

-webkit-transform: matrix(1.186,-0.069,0.102,1.036,16.595,73.291);
-moz-transform: matrix(1.186,-0.069,0.102,1.036,16.595px,73.291px);
-ms-transform: matrix(1.186,-0.069,0.102,1.036,16.595,73.291);
-o-transform: matrix(1.186,-0.069,0.102,1.036,16.595,73.291);
transform: matrix(1.186,-0.069,0.102,1.036,16.595,73.291);

}

@font-face {
  font-family: 'WebFont';
  src: url('myfont.woff') format('woff'), /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */
       url('myfont.ttf') format('truetype'); /* Chrome 4+, Firefox 3.5, Opera 10+, Safari 3—5 */
}
</code></pre>

<h3>JSON Output</h3>

<pre><code>{
    "charset": "'utf-8'",
    "imports": [
        {
            "import": "'custom.css'"
        },
        {
            "import": "url(\"fineprint.css\")"
        },
        {
            "import": "url(\"fineprint.css\")",
            "mediaqueries": "print"
        },
        {
            "import": "url(\"bluish.css\")",
            "mediaqueries": "projection, tv"
        },
        {
            "import": "\"common.css\"",
            "mediaqueries": "screen, projection"
        },
        {
            "import": "url('landscape.css')",
            "mediaqueries": "screen and (orientation:landscape)"
        }
    ],
    "namespaces": [
        {
            "namespace": "\"http://www.w3c.org\""
        },
        {
            "namespace": "\"http://www.w3c.org/svg\"",
            "prefix": "svg"
        }
    ],
    "rulelist": [
        {
            "type": "media",
            "mediaqueries": "screen",
            "children": [
                {
                    "type": "style",
                    "selector": "*",
                    "declarations": {
                        "position": "absolute"
                    }
                },
                {
                    "type": "style",
                    "selector": ".box_shadow",
                    "declarations": {
                        "-webkit-box-shadow": "0px 0px 4px 0px #ffffff",
                        "box-shadow": "0px 0px 4px 0px #ffffff"
                    }
                }
            ]
        },
        {
            "type": "keyframes",
            "id": "myanim",
            "keyframes": [
                {
                    "offset": "0%",
                    "declarations": {
                        "opacity": "0.0"
                    }
                },
                {
                    "offset": "50%",
                    "declarations": {
                        "opacity": "0.5"
                    }
                },
                {
                    "offset": "100%",
                    "declarations": {
                        "opacity": "1.0"
                    }
                }
            ],
            "prefix": "-webkit-"
        },
        {
            "type": "style",
            "selector": ".matrix",
            "declarations": {
                "-webkit-transform": "matrix(1.186,-0.069,0.102,1.036,16.595,73.291)",
                "-moz-transform": "matrix(1.186,-0.069,0.102,1.036,16.595px,73.291px)",
                "-ms-transform": "matrix(1.186,-0.069,0.102,1.036,16.595,73.291)",
                "-o-transform": "matrix(1.186,-0.069,0.102,1.036,16.595,73.291)",
                "transform": "matrix(1.186,-0.069,0.102,1.036,16.595,73.291)"
            }
        },
        {
            "type": "fontface",
            "declarations": {
                "font-family": "'WebFont'",
                "src": "url('myfont.woff') format('woff'),url('myfont.ttf') format('truetype')"
            }
        }
    ]
}
</code></pre>

<h2>Change log</h2>

<ul>
<li>0.2.0 - May 20, 2013</li>
<ul><li>Initial release of cssparser.js.</li></ul>
</ul>

<h2>To do list</h2>

<ul>
<li>Parsing &amp; generating options like simple JSON expression or more detailed.</li>
<li>Error recovery for input css.</li>
<li>Utilities

<ul>
<li>Minify &amp; optimize css.</li>
<li>Auto-generate Cross-browsing stylesheets.</li>
</ul>
</li>
</ul>
</ul>

<h2>DISCUSSIONS</h2>

<!-- start of disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
	var disqus_shortname = 'cwdoh';

	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
<!-- end of disqus -->

      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/cwdoh">cwdoh</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-40929587-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>